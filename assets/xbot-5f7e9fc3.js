import{c as A,a as C,b as E,i as b,d as y,e as B,r as M,f as S,g as D,A as H,C as q}from"./threeUtil-14e90137.js";import{d as z,r as F,o as G,a as I,b as R,c as T}from"./index-18f1b46a.js";const J=z({__name:"xbot",setup(U){const f=F();G(()=>{f.value&&w(f.value)});let n;const _=new q;let d,i,a,p=null;const w=t=>{r=0,h=[],c=[],m=!0,n=t;const e=n.offsetWidth,s=n.offsetHeight;d=A(e/s),i=C(e,s),a=E(),n.append(i.domElement),b(a),y(d,i.domElement),p=B(n),g(),M(n,d,i),L();const{ambientLight:o,mainLight:l}=S();l.position.set(0,0,0),a.add(o),l.position.set(50,150,50),a.add(l)};let h=[],c=[],r=0;const L=async()=>{const t=await D("model/Xbot.glb"),e=t.scene;e.scale.set(80,80,80),t.animations.forEach(o=>{const l=o,x=new H(e);x.clipAction(l).play(),e[o.name]=v=>x.update(v),c.push(o.name)}),a.add(e),h.push(e),u()},u=()=>{m&&setTimeout(()=>{r<c.length?r+=1:r=0,u()},3e3)};let m=!0;const g=()=>{const t=_.getDelta();i.render(a,d),p&&p.update(t),h.forEach(e=>{if(c.length===0)return;const s=c[r];try{e[s]&&e[s](t)}catch{}e.rotateY(.01)}),m&&requestAnimationFrame(g)},k=()=>{m=!1};return I(()=>{k()}),(t,e)=>(R(),T("div",{ref_key:"container",ref:f,class:"flex flex-1 overflow-hidden"},null,512))}});export{J as default};
