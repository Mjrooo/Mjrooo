import{c as _,a as w,b as x,T as C,F as b,i as v,d as L,e as B,r as E,f as y,l as F,C as j}from"./threeUtil-14e90137.js";import{d as A,r as D,o as H,a as S,b as T,c as q}from"./index-18f1b46a.js";const R=A({__name:"birds",setup(z){const i=D();H(()=>{i.value&&g(i.value)});let n;const p=new j;let r,o,t,c=null;const g=a=>{l=!0,n=a;const e=n.offsetWidth,s=n.offsetHeight;r=_(e/s),o=w(e,s),t=x(),t.background=new C().load("textures/sky.jpg"),t.fog=new b(14673641,10,1e3),n.append(o.domElement),v(t),L(r,o.domElement),c=B(n),u(),E(n,r,o),h()},m=[],h=async()=>{const{ambientLight:a,mainLight:e}=y({groundColor:16777215});e.position.set(50,0,0),t.add(a),t.add(e);const{parrot:s,stork:d,flamingo:f}=await F();m.push(s,d,f),d.translateY(30),f.translateX(50),t.add(s,d,f)};let l=!0;const u=()=>{console.log("jr render");const a=p.getDelta();o.render(t,r),c&&c.update(a),m.forEach(e=>{e.tick&&e.tick(a)}),l&&requestAnimationFrame(u)},k=()=>{l=!1};return S(()=>{k(),console.log("jr","销毁birds")}),(a,e)=>(T(),q("div",{ref_key:"container",ref:i,class:"flex-1 overflow-hidden"},null,512))}});export{R as default};
